{% extends "base.html" %}

{% block title %}Online Library{% endblock %}

{% block content %}
    <!-- Hero Section -->
    <section class="relative bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-16 mb-12 rounded-lg shadow-lg overflow-hidden">
        <div class="container mx-auto px-6 flex flex-col md:flex-row items-center">
            <div class="md:w-2/3"></div>
                <h1 class="text-4xl md:text-5xl font-bold mb-4">Welcome to the Online Library</h1>
                <p class="text-lg md:text-xl mb-6">
                    Discover top-rated books, explore new genres, and manage your reading journeyâ€”all in one place.
                </p>
                <a href="#top-books" class="inline-block bg-white text-blue-700 font-semibold px-6 py-3 rounded shadow hover:bg-blue-100 transition">Browse Top Books</a>
            </div>
            <div class="flex justify-center items-start h-full"></div>
                <img src="https://img.icons8.com/ios-filled/200/ffffff/books.png" alt="Books" class="w-40 h-40 opacity-90">
            </div>
        </div>
        <div class="absolute bottom-0 left-0 w-full h-16 bg-gradient-to-t from-white to-transparent"></div>
    </section>

    <!-- Top 10 Rated Books Box -->
    <div id="top-books" class="bg-white rounded-lg shadow p-8 mb-10">
        <h2 class="text-2xl font-semibold mb-6 text-blue-700">Top 10 Rated Books</h2>
        <div class="relative">
            <!-- Slider Buttons -->
            <button id="slider-left" type="button" class="absolute left-0 top-1/2 -translate-y-1/2 z-20 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-full p-2 shadow transition hidden md:block">
                &#8592;
            </button>
            <div id="books-slider" class="overflow-x-auto scroll-smooth">
                <div class="flex space-x-6 items-center h-[340px] min-w-max">
                    {% for book in top_books %}
                        {% if forloop.counter == 10 %}
                            <div class="relative w-[220px] h-[340px] flex-shrink-0 flex items-center">
                                <a href="{% url 'book_detail' book.isbn|stringformat:'s' %}" 
                                   class="absolute inset-0 bg-blue-50 rounded-lg shadow hover:shadow-lg transition p-5 flex flex-col items-center overflow-hidden z-10">
                                    <img src="{{ book.image_url_s }}" alt="{{ book.title }}" 
                                         class="w-28 h-40 object-cover mb-3 mx-auto rounded" />
                                    <span class="font-bold text-gray-800 text-lg mb-2 text-center truncate w-full block" title="{{ book.title }}">{{ book.title }}</span>
                                    <span class="font-medium text-gray-800 text-md mb-2 text-center truncate w-full block" title="{{ book.author }}">by {{ book.author }}</span>
                                    <span class="text-sm text-indigo-600 font-semibold mb-1 text-center">Rating: {{ book.rating }}</span>
                                </a>
                                <div class="absolute inset-0 rounded-lg pointer-events-none" style="background: linear-gradient(to right, rgba(255,255,255,0) 60%, rgba(255,255,255,0.85) 100%); filter: blur(2px); z-index:20;"></div>
                            </div>
                            <!-- Extra space for continue link -->
                            <div class="w-[120px] h-[340px] flex items-center justify-end relative flex-shrink-0">
                                <div class="absolute right-0 top-1/2 -translate-y-1/2 flex flex-col items-end w-full">
                                    <a href="{% url 'books_list' %}" class="text-blue-700 font-semibold text-sm underline hover:text-blue-900 transition px-2 py-1">
                                        Continue &rarr;
                                    </a>
                                </div>
                            </div>
                        {% else %}
                            <a href="{% url 'book_detail' book.isbn %}" 
                               class="w-[220px] h-[340px] bg-blue-50 rounded-lg shadow hover:shadow-lg transition p-5 flex flex-col items-center flex-shrink-0 overflow-hidden">
                                <img src="{{ book.image_url_s }}" alt="{{ book.title }}" 
                                     class="w-28 h-40 object-cover mb-3 mx-auto rounded" />
                                <span class="font-bold text-gray-800 text-lg mb-2 text-center truncate w-full block" title="{{ book.title }}">{{ book.title }}</span>
                                <span class="font-medium text-gray-800 text-md mb-2 text-center truncate w-full block" title="{{ book.author }}">by {{ book.author }}</span>
                                <span class="text-sm text-indigo-600 font-semibold mb-1 text-center">Rating: {{ book.rating }}</span>
                            </a>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <button id="slider-right" type="button" class="absolute right-0 top-1/2 -translate-y-1/2 z-20 bg-blue-100 hover:bg-blue-200 text-blue-700 rounded-full p-2 shadow transition hidden md:block">
                &#8594;
            </button>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const slider = document.getElementById('books-slider');
            const leftBtn = document.getElementById('slider-left');
            const rightBtn = document.getElementById('slider-right');
            if (slider && leftBtn && rightBtn) {
                leftBtn.addEventListener('click', function() {
                    slider.scrollBy({ left: -260, behavior: 'smooth' });
                });
                rightBtn.addEventListener('click', function() {
                    slider.scrollBy({ left: 260, behavior: 'smooth' });
                });
            }
        });
    </script>
    </div>

    <!-- Helpful Information Section -->
    <div class="bg-blue-50 rounded-lg shadow p-8">
        <h3 class="text-xl font-semibold mb-3 text-blue-800">How to Use the Library</h3>
        <p class="text-gray-700 mb-3">
            Browse our collection, discover new favorites, and keep track of your reading journey.
        </p>
        <ul class="list-disc list-inside text-gray-700 space-y-1">
            <li>Find books by rating, genre, or author.</li>
            <li>Access detailed book information and reviews.</li>
            <li>Use your account to save books and manage your reading list.</li>
        </ul>
    </div>
{% endblock %}

{% include "footer.html" %}